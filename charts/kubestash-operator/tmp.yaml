---
# Source: kubestash-operator/templates/rbac/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: release-name-kubestash-operator
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    anisur: rahman
---
# Source: kubestash-operator/templates/webhook-server/cert.yaml
apiVersion: v1
kind: Secret
metadata:
  name: release-name-kubestash-operator-webhook-cert
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
type: Opaque
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lRVWZjbDdXSysxbGpwZ0lCN3M1bG1qakFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TlRBek1URXhNalUwTkROYUZ3MHpOVEF6TURreE1qVTBORE5hTUEweApDekFKQmdOVkJBTVRBbU5oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF2TUpICitpczFWQk5BbGg5NC9uSXUycTgwdTRrWlRZVGJOcmNCZ1pxNTVZK3ByR0puY3hFZnBkQlUrbVZYVWwweDd3VHcKczhJN1BzektxVUFFMnlMdmhkNDkwV0crU01KV2xOV2dnNmJ2YndBQ2lGZE96NUUvTUMyWGlKN1RUSjZLQkxDSwovNlYwcXN0U1pwQW5YdjdHd0ZOb1JYaUFKSFQ4SndDY085eXpnRmxmNmNoY2h0RFFWRmdrdGJRbE1ieFBJQ2tsCmM4UExYSmZNQ0pOUUtBSkpJZlF4ZUdod3htUDI0Q0Z5QVAwcnVGZkNVZHVRT1JHbEh1TCtqUUJFc1VWeWI5bkUKK2M3a1oyM2NyNEhjVHZUTnlFRXdETFdWOUhoWGErOGtPOXd6RXBqS200aFRLalpub054RXVFeXFRZk5ud2VyMApEdnBCd3gzeTBuckVsbzFqUHdJREFRQUJvMkV3WHpBT0JnTlZIUThCQWY4RUJBTUNBcVF3SFFZRFZSMGxCQll3CkZBWUlLd1lCQlFVSEF3RUdDQ3NHQVFVRkJ3TUNNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUUKRkNuNzBhN2Y3bUsxdE1ZU1MvMVhkZGxkVXNBS01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ3lzQkpkYWM3VApxZWFWdzNFMXBvN3ZXdnc1cU4vZWpMR2NSZkI3WHhRak43d1pWdlZ0TE05M0xYMGNKeWhrNmNzN2VVdVVmb3ZNCmkrSjZXUXVHNUhjRDd0YVAzQ3dGUWpIV0kyWGdXMnozQ2UzK1RZRzQ2cklJVVlPK1Y1TGpVYTRFVnBzMGdQUEUKRWx6Z0E3emdHdmJ6Sk9LbTNmSGpyb0dVQmsza2Nobmh0VWp3ems5YzdoNml2bUtldkRscXRYazM0UzFNOGdjaQpqaEpaZXRERmlrR0EwRFoxaHhNSGpqVFcwYUo3K3VyUmpkTWdJRmdkUWxUdnFnMGgzdXk3bTJzeHJZSEpIU2lhCnNqVTA4WE9zZUZSVDlrSUZJU0lKNWZROGZ3THMxeDVkYzFxS3M2Ym15eUhoQjgrcEYrOUhsdC92L1BzSnczQUsKYzI3QzJhb3haZE5CCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURuVENDQW9XZ0F3SUJBZ0lSQUtubWc2VldrK3QyM01tQkNKWE8xcm93RFFZSktvWklodmNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdIaGNOTWpVd016RXhNVEkxTkRReldoY05NelV3TXpBNU1USTFORFF6V2pBeQpNVEF3TGdZRFZRUURFeWR5Wld4bFlYTmxMVzVoYldVdGEzVmlaWE4wWVhOb0xXOXdaWEpoZEc5eUxYZGxZbWh2CmIyc3dnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFEQUkvSytzTHIrYXF2Vm1ITEcKUC9Gd1cyN2tOSHB5RnVIYm0wN3Q4SDB4SDdpMlB0UGJMOTBWSE9qMk5LSGUvNzBqam5acFRueWxVbE95cDMrdQpyOGZ6S0kzcWJxRmJmdTYzTnpTYXVKRy9XKzluanhQd0N1ZU94ZU9tRS82TUhPZVNqTllFV0FPRE9qN0RveG94CnoyQVhjS2g3YkhTNEIrZWxYWlh2TUlnMi9VaWI0SmJ6dUs0enl2dFpuRWVBSE13WXo0VjE0bHUraHZoVFU5MzMKVEdCdnVuV0JuWXVaRG92eVFFMjMzNDFySGNBbytCZG5VZUdoSytHOGwyWWRUcUFBTlRva29lUkVaYlFXSVdDeQpRbExuVTVFQXZrVXRqMHU5NGRxeExaa0ovazZLKzhEUTdzdGFTczFyV0NaZkkyQ1BRNEpVaEE2akxmU2NDYXYzCjMzdzFBZ01CQUFHamdkSXdnYzh3RGdZRFZSMFBBUUgvQkFRREFnV2dNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUYKQndNQkJnZ3JCZ0VGQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUI4R0ExVWRJd1FZTUJhQUZDbjcwYTdmN21LMQp0TVlTUy8xWGRkbGRVc0FLTUc4R0ExVWRFUVJvTUdhQ0wzSmxiR1ZoYzJVdGJtRnRaUzFyZFdKbGMzUmhjMmd0CmIzQmxjbUYwYjNJdGQyVmlhRzl2YXk1a1pXWmhkV3gwZ2pOeVpXeGxZWE5sTFc1aGJXVXRhM1ZpWlhOMFlYTm8KTFc5d1pYSmhkRzl5TFhkbFltaHZiMnN1WkdWbVlYVnNkQzV6ZG1Nd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQgpBQnBVUDRhT1ptbm1iUmdUdnpKK2trcGFlbnZJSXpTQWdNUUZMT1puS1FwbjczblBUUDdwWmlZaVREV3o5UDV1CllJdXB5SkcyNzR0UzhBbytlbW1UNGFuTGVuN1B3bE5JWnRUUzJQSzZxeDhBb2dRQU5ManFsV2ZWZWhwTU5qdWsKMmsvVUpiUDNobUhIcERNRGpaaEpWVkVJbDVYU29OVHBOdzJCMHFDZ3NBUkJoNG10cFVUKzdNQW9oTmMzQkF4Uwpxa1lmYzhyME9jSlpzSVRLMERYS0VvTXVBa0lEcnpES2daL24wcHZEVWM5cThqTTVsNlNibVBUanVyQ0xCaUdFCmVVaUgxN0szNkxkak9pQ3V5aW5PTlBKQVg5S1hnOTM0S0RGZGVQdU9DTkRsdkVWQmNNODZXUjkwTisrWmlvM2gKOGxMK0F4ZGkyQkVIZ0lHNXFXNFY5bHM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBd0NQeXZyQzYvbXFyMVpoeXhqL3hjRnR1NURSNmNoYmgyNXRPN2ZCOU1SKzR0ajdUCjJ5L2RGUnpvOWpTaDN2KzlJNDUyYVU1OHBWSlRzcWQvcnEvSDh5aU42bTZoVzM3dXR6YzBtcmlSdjF2dlo0OFQKOEFybmpzWGpwaFArakJ6bmtveldCRmdEZ3pvK3c2TWFNYzlnRjNDb2UyeDB1QWZucFYyVjd6Q0lOdjFJbStDVwo4N2l1TThyN1daeEhnQnpNR00rRmRlSmJ2b2I0VTFQZDkweGdiN3AxZ1oyTG1RNkw4a0JOdDkrTmF4M0FLUGdYCloxSGhvU3ZodkpkbUhVNmdBRFU2SktIa1JHVzBGaUZnc2tKUzUxT1JBTDVGTFk5THZlSGFzUzJaQ2Y1T2l2dkEKME83TFdrck5hMWdtWHlOZ2owT0NWSVFPb3kzMG5BbXI5OTk4TlFJREFRQUJBb0lCQVFDTSt4T0hGYmZ2SzZmdgpyczh3WmdTcTAzdjNXQVlzSmx3TXZkVlpReWNvMzBTeC9FR0l4NExwbGUvZGoxcmlmRFYwbkhpSDVqNFJNK29UCjRWRVBoUTBxZnF3NnduZ0U0WXNZeGhvRUdMOWdjSDJtTjlhQ1FBNE50V2ZIR1U2aDBpZWNZVmc3a2JUcUdkZXAKeHNoV21mbkEyVG5XYmdycWFXcHY3TTR4MWlOc2JJRFdTQkIyazQyMGhaQkxSa2NXU3N0NHNwQ0ZCMXpRNERjcwpnUzVjUHlvNDZyVGo1clV0K29oVURJUEx2ZHM4RXJoWlBRb3dGMERWcGRuZWpKZlFpMURGWWowZi9ZZVk1SDBmCll6dnFuYjYzRjlLRk1jeVNwNkl5UXJQN0lVNWxGZWlwMHdETXRtbjFHOWhnNjRvR083QnFidmVMLzh5dHVsUkIKRC9LYmNaaWhBb0dCQU5yVTVzMDdWQUN6QTVqR1d4SW5ud1lWQk1YeUZqRTlLOXBXRlBDN0JNNmI3NGNRNzc5ZQo3UE9ZZTZFQTJEZWFkc1NpbmlOVW1Bcy9JWjJrNTlOWFFYYjVJR25wMy9Ua21wY2p2aURMVHdlUkFLb1BIOW1OCkJFZWlGNkxlVkphV0JKWmx2NDI2ZEt5SlUwRGs0NWt1cHUzU29UR3gydytjdWtSWHZlelV1cTFOQW9HQkFPREcKZWRBemZNYk5BSDVDWFJZcXljRWVwbGYxOEJ6RTJCY2lRbTR1OTdJbS9IMlltblRWekJzVGNYZGdKejdaVzFOTgpTNTZxSW0xTFFhUGozTlZYR3VvOGhUaGtPYjhyMnVjdG8yNHFiMml0U0luNTZyQlNUM1gySUJrejR1TTJLUm40Ck5ZNi9SMzV3QUtEbjBMUnRHUWtiNWpxMUVxcnZUMC9ZOHJMNTFMYUpBb0dBV2VNcUN4TmJwZzNpWkZiV0FkY1UKazBMKyt2QTkvV3ZMSDV4TWJiWGtlNW5DQWhFSzZlanNIQU4raE52NzlKc1dQaDh1SmdVUmowMFhXZEhyQi96SApmejlGK1R1QUt1L2NNRWtXU0JJN0hEaUx0VThSSGlPMnBsWUdyM2Z6OXdjWVMwN3dLQjkyM1lockVqVHk2SEVwClVIYzhqMVVuVG5wcWFMaEI0NDVlUCtFQ2dZQkNZZnQ1eEtyMkgzY2swcjZoSEZQbmFBRGllMnpGWWxFYlMrL28Ka0pCd21kajUwc2JTK0kxRjlkRU4yMlRieDkrVDA0RWd3OGhWRk9PMjNrWEs3K1d3QmQybVVOdEpIVStSOU1XTwpkSlBnaTBTZ0V5SC9udDkrekFpZ3lOVWFHMVc2S0xiUWlLYzVyU1JTWVFRZk5SVXV2b0daRnY4RFlwZSswaWlqCk9PdGNXUUtCZ0U0c3hYSXY1bmoxeHljQ2ZZbzI4OTM1RDlkMEh6cXBwYUc3b2lDblNnU2U0R3hvZWR4eTJRV0oKYkdJaitnNzd1QkhwbVJ5RmZMY2Y0V3J3N0pRczdtQ2pqRUFrMEVDckV5UmxpS1ZHWGlDNGRUNzNLMUNSUWd1eQpiODZCLzJMSGczUDFCZVJHb0dua214bXhncStCcmZzTFBnSnV2OVpWelpJWWdONXJtZ1BECi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
---
# Source: kubestash-operator/templates/operator/configuration.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: release-name-kubestash-operator-config
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  config.yaml: |
    apiVersion: config.kubestash.com/v1alpha1
    kind: KubeStashConfig
    health:
      healthProbeBindAddress: :8081
    metrics:
      bindAddress: 127.0.0.1:8080
    webhook:
      port: 9443
      certDir: /var/serving-cert
    leaderElection:
      leaderElect: false
      resourceName: cba9d7ad.kubestash.com
    
    webhookInfo:
      validating:
        enable: true
        name: release-name-kubestash-operator
      mutating:
        enable: true
        name: release-name-kubestash-operator
    docker:
      registry: ghcr.io/kubestash
      image: kubestash
      tag: v0.16.0
    netVolAccessor:
      cpu: 100m
      memory: 128Mi
      user: 2000
      privilegedMode: false
---
# Source: kubestash-operator/templates/rbac/auth_proxy.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: release-name-kubestash-operator-auth-proxy
rules:
  - apiGroups:
      - authentication.k8s.io
    resources:
      - tokenreviews
    verbs:
      - create
  - apiGroups:
      - authorization.k8s.io
    resources:
      - subjectaccessreviews
    verbs:
      - create
---
# Source: kubestash-operator/templates/rbac/cluster_role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: release-name-kubestash-operator
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
rules:
  - apiGroups:
      - apiextensions.k8s.io
    resources:
      - customresourcedefinitions
    verbs: ["get", "create", "patch", "update"]
  - apiGroups:
      - admissionregistration.k8s.io
    resources:
      - mutatingwebhookconfigurations
      - validatingwebhookconfigurations
    verbs: ["*"]
  - apiGroups:
      - core.kubestash.com
      - kubedb.com
      - snapshot.storage.k8s.io
    resources:
      - "*"
    verbs: ["*"]
  - apiGroups:
      - storage.kubestash.com
    resources:
      - "*"
    verbs: ["*"]
  - apiGroups:
      - appcatalog.appscode.com
    resources:
      - "*"
    verbs: ["get", "list", "watch"]
  - apiGroups:
      - config.kubestash.com
    resources:
      - "*"
    verbs: ["*"]
  - apiGroups:
      - addons.kubestash.com
    resources:
      - "*"
    verbs: [ "*" ]
  - apiGroups:
      - ""
    resources:
      - events
    verbs: ["create"]
  - apiGroups:
      - apps
    resources:
      - daemonsets
      - statefulsets
      - replicasets
    verbs: ["get", "list", "watch", "create"]
  - apiGroups:
      - apps
    resources:
      - deployments
    verbs: ["get", "list", "watch", "create", "patch", "update"]
  - apiGroups:
      - ""
    resources:
      - persistentvolumeclaims
      - persistentvolumes
    verbs: ["get", "list", "watch", "create", "patch", "delete", "update"]
  - apiGroups:
      - ""
    resources:
      - endpoints
      - pods
    verbs: ["get", "list", "watch"]
  - apiGroups:
      - ""
    resources:
      - services
    verbs: ["get", "list", "watch","create"]
  - apiGroups:
      - ""
    resources:
      - pods/exec
    verbs: ["create"]
  - apiGroups:
      - ""
    resources:
      - secrets
    verbs: ["get", "list", "create", "patch", "watch", "delete"]
  - apiGroups:
      - ""
    resources:
      - configmaps
      - services
    verbs: ["get", "create"]
  - apiGroups:
      - batch
    resources:
      - jobs
      - cronjobs
    verbs: ["get", "list", "watch", "create", "delete", "patch", "update"]
  - apiGroups:
      - ""
    resources:
      - nodes
      - namespaces
    verbs: [ "get", "list", "watch" ]
  - apiGroups:
      - ""
    resources:
      - serviceaccounts
    verbs: ["get", "list", "watch", "create", "delete", "patch", "update"]
  - apiGroups:
      - rbac.authorization.k8s.io
    resources:
      - clusterroles
      - roles
      - rolebindings
      - clusterrolebindings
    verbs: ["get","list", "watch", "create", "delete", "patch", "update"]
  - apiGroups:
      - snapshot.storage.k8s.io
    resources:
      - volumesnapshots
    verbs: ["get","delete"]
  - apiGroups:
      - storage.k8s.io
    resources:
      - storageclasses
    verbs: [ "get", "list", "watch" ]
  - apiGroups:
      - catalog.kubedb.com
    resources:
      - elasticsearchs
    verbs: [ "get", "list", "watch" ]
  - apiGroups:
      - appcatalog.appscode.com
    resources:
      - appbindings
    verbs: [ "get", "list", "watch" ]
  - apiGroups:
      - elasticsearch.kubedb.com
    resources:
      - elasticsearchdashboards
    verbs: ["list"]
  - apiGroups:
      - cert-manager.io
    resources:
      - certificates
    verbs: [ "get", "create"]
  - apiGroups:
      - archiver.kubedb.com
    resources:
      - "*"
    verbs: [ "get", "create" ]
---
# Source: kubestash-operator/templates/rbac/metrics_reader.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: release-name-kubestash-operator-metrics-reader
rules:
  - nonResourceURLs:
      - /metrics
    verbs:
      - get
---
# Source: kubestash-operator/templates/license/license-checker-cluster-role-binding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: release-name-kubestash-operator-license-checker
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: appscode:license-checker
subjects:
- kind: ServiceAccount
  name: release-name-kubestash-operator
  namespace: default
---
# Source: kubestash-operator/templates/license/license-reader-cluster-role-binding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: release-name-kubestash-operator-license-reader
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: appscode:license-reader
subjects:
- kind: ServiceAccount
  name: release-name-kubestash-operator
  namespace: default
---
# Source: kubestash-operator/templates/rbac/auth_proxy.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: release-name-kubestash-operator-auth-proxy
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: release-name-kubestash-operator-auth-proxy
subjects:
  - kind: ServiceAccount
    name: release-name-kubestash-operator
    namespace: default
---
# Source: kubestash-operator/templates/rbac/cluster_role_binding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: release-name-kubestash-operator
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: release-name-kubestash-operator
subjects:
- kind: ServiceAccount
  name: release-name-kubestash-operator
  namespace: default
---
# Source: kubestash-operator/templates/rbac/leader_election.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: release-name-kubestash-operator-leader-election
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
rules:
  - apiGroups:
      - ""
    resources:
      - configmaps
    verbs:
      - get
      - list
      - watch
      - create
      - update
      - patch
      - delete
  - apiGroups:
      - coordination.k8s.io
    resources:
      - leases
    verbs:
      - get
      - list
      - watch
      - create
      - update
      - patch
      - delete
  - apiGroups:
      - ""
    resources:
      - events
    verbs:
      - create
      - patch
---
# Source: kubestash-operator/templates/rbac/leader_election.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: release-name-kubestash-operator-leader-election
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: release-name-kubestash-operator-leader-election
subjects:
  - kind: ServiceAccount
    name: release-name-kubestash-operator
    namespace: default
---
# Source: kubestash-operator/templates/webhook-server/monitoring/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: release-name-kubestash-operator
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  ports:
  - name: https
    port: 8443
    protocol: TCP
    targetPort: https
  selector:
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    component: webhook-server
---
# Source: kubestash-operator/templates/webhook-server/webhook_service.yaml
apiVersion: v1
kind: Service
metadata:
  name: release-name-kubestash-operator-webhook
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    component: webhook-server
  ports:
  - port: 443
    protocol: TCP
    targetPort: 9443
---
# Source: kubestash-operator/templates/operator/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: release-name-kubestash-operator-operator
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
    component: operator
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: kubestash-operator
      app.kubernetes.io/instance: release-name
      component: operator
  template:
    metadata:
      labels:
        app.kubernetes.io/name: kubestash-operator
        app.kubernetes.io/instance: release-name
        component: operator
      annotations:
        checksum/apiregistration.yaml: 1d8200cddcff599e6596258d1ac896fd44e0e5a1770a060a87b12d554a6fddd1
    spec:
      
      serviceAccountName: release-name-kubestash-operator
      containers:
      - name: operator
        image: "ghcr.io/kubestash/kubestash:v0.16.0"
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
          - operator
          - --config=/var/config/config.yaml
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_SERVICE_ACCOUNT
          value: release-name-kubestash-operator
        resources:
          requests:
            cpu: 100m
        volumeMounts:
        - mountPath: /tmp
          name: tmpdir
        - name: kubestash-tmp-volume
          mountPath: /kubestash-tmp
        - name: config
          mountPath: /var/config
      volumes:
      - name: tmpdir
        emptyDir: {}
      - name: kubestash-tmp-volume
        emptyDir: {}
      - name: config
        configMap:
          name: release-name-kubestash-operator-config
      securityContext:
        fsGroup: 65535
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: kubestash-operator/templates/webhook-server/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: release-name-kubestash-operator-webhook-server
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
    component: webhook-server
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: kubestash-operator
      app.kubernetes.io/instance: release-name
      component: webhook-server
  template:
    metadata:
      labels:
        app.kubernetes.io/name: kubestash-operator
        app.kubernetes.io/instance: release-name
        component: webhook-server
      annotations:
        checksum/apiregistration.yaml: 13300ffb6fce47ac3520984697bb6d22e2216be0209122cc8a0d035a34b30b47
    spec:
      
      serviceAccountName: release-name-kubestash-operator
      containers:
      - name: webhook-server
        image: "ghcr.io/kubestash/kubestash:v0.16.0"
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
          - webhook-server
          - --config=/var/config/config.yaml
        ports:
        - name: webhook-server
          containerPort: 9443
          protocol: TCP
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        resources:
          requests:
            cpu: 100m
        volumeMounts:
        - mountPath: /tmp
          name: tmpdir
        - name: kubestash-tmp-volume
          mountPath: /kubestash-tmp
        - name: serving-cert
          mountPath: /var/serving-cert
          readOnly: true
        - name: config
          mountPath: /var/config
      - name: kube-rbac-proxy
        image: "ghcr.io/appscode/kube-rbac-proxy:v0.15.0"
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
        args:
        - --secure-listen-address=0.0.0.0:8443
        - --upstream=http://127.0.0.1:8080/
        - --logtostderr=true
        - --v=10
        ports:
        - containerPort: 8443
          name: https
          protocol: TCP
      volumes:
      - name: tmpdir
        emptyDir: {}
      - name: kubestash-tmp-volume
        emptyDir: {}
      - name: serving-cert
        secret:
          defaultMode: 420
          secretName: release-name-kubestash-operator-webhook-cert
      - name: config
        configMap:
          name: release-name-kubestash-operator-config
      securityContext:
        fsGroup: 65535
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: kubestash-operator/templates/license/license.yaml
# if license file is provided, then create a secret for license
---
# Source: kubestash-operator/templates/cleaner/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: release-name-kubestash-operator-cleaner
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": pre-delete
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded,hook-failed
---
# Source: kubestash-operator/templates/cleaner/cluster_role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: release-name-kubestash-operator-cleaner
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": pre-delete
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded,hook-failed
rules:
  - apiGroups:
      - admissionregistration.k8s.io
    resources:
      - mutatingwebhookconfigurations
      - validatingwebhookconfigurations
    verbs: ["delete"]
  - apiGroups:
      - addons.kubestash.com
      - core.kubestash.com
      - storage.kubestash.com
    resources:
      - "*"
    verbs: ["delete"]
  - apiGroups:
      - batch
    resources:
      - jobs
    verbs: ["delete"]
---
# Source: kubestash-operator/templates/cleaner/cluster_rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: release-name-kubestash-operator-cleaner
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": pre-delete
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded,hook-failed
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: release-name-kubestash-operator-cleaner
subjects:
  - kind: ServiceAccount
    name: release-name-kubestash-operator-cleaner
    namespace: default
---
# Source: kubestash-operator/templates/cleaner/job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: release-name-kubestash-operator-cleaner
  namespace: default
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": pre-delete
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded,hook-failed
spec:
  backoffLimit: 3
  activeDeadlineSeconds: 120
  template:
    spec:
      
      serviceAccountName: release-name-kubestash-operator-cleaner
      containers:
      - name: busybox
        image: "ghcr.io/appscode/kubectl:v1.31"
        command:
          - sh
          - -c
          - "sleep 2; \
           kubectl delete functions.stash.appscode.com update-status pvc-backup pvc-restore || true; \
           kubectl delete tasks.stash.appscode.com pvc-backup pvc-restore || true;"
        imagePullPolicy: IfNotPresent
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 65534
          seccompProfile:
            type: RuntimeDefault
      restartPolicy: Never
      nodeSelector:
        kubernetes.io/os: linux
---
# Source: kubestash-operator/templates/webhook-server/mutating_webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: release-name-kubestash-operator
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
webhooks:
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /mutate-storage-kubestash-com-v1alpha1-backupstorage
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: mbackupstorage.kb.io
    rules:
      - apiGroups:
          - storage.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - backupstorages
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /mutate-storage-kubestash-com-v1alpha1-retentionpolicy
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: mretentionpolicy.kb.io
    rules:
      - apiGroups:
          - storage.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - retentionpolicies
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /mutate-core-kubestash-com-v1alpha1-backupblueprint
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: mbackupblueprint.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - backupblueprints
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /mutate-core-kubestash-com-v1alpha1-backupconfiguration
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: mbackupconfiguration.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - backupconfigurations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /mutate-core-kubestash-com-v1alpha1-hooktemplate
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: mhooktemplate.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - hooktemplates
    sideEffects: None
---
# Source: kubestash-operator/templates/webhook-server/validating_webhook.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: release-name-kubestash-operator
  labels:
    helm.sh/chart: kubestash-operator-v0.16.0
    app.kubernetes.io/name: kubestash-operator
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "v0.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation
webhooks:
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-storage-kubestash-com-v1alpha1-backupstorage
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vbackupstorage.kb.io
    rules:
      - apiGroups:
          - storage.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - backupstorages
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-storage-kubestash-com-v1alpha1-repository
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vrepository.kb.io
    rules:
      - apiGroups:
          - storage.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - repositories
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-storage-kubestash-com-v1alpha1-retentionpolicy
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vretentionpolicy.kb.io
    rules:
      - apiGroups:
          - storage.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - retentionpolicies
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-core-kubestash-com-v1alpha1-backupbatch
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vbackupbatch.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - backupbatches
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-core-kubestash-com-v1alpha1-backupblueprint
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vbackupblueprint.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - backupblueprints
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-core-kubestash-com-v1alpha1-backupconfiguration
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vbackupconfiguration.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - backupconfigurations
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-core-kubestash-com-v1alpha1-backupsession
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vbackupsession.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - backupsessions
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-core-kubestash-com-v1alpha1-hooktemplate
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vhooktemplate.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - hooktemplates
    sideEffects: None
  - admissionReviewVersions:
      - v1
    clientConfig:
      service:
        name: release-name-kubestash-operator-webhook
        namespace: default
        path: /validate-core-kubestash-com-v1alpha1-restoresession
      caBundle: bm90LWNhLWNlcnQ=
    failurePolicy: Fail
    name: vrestoresession.kb.io
    rules:
      - apiGroups:
          - core.kubestash.com
        apiVersions:
          - v1alpha1
        operations:
          - CREATE
          - UPDATE
        resources:
          - restoresessions
    sideEffects: None
